<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>instructions</title></head>
<body>
<h1>instructions.sail (117/236) 50%</h1>
<code style="display: block">
<br>
/*&nbsp;execute&nbsp;function&nbsp;*/<br>
val&nbsp;execute&nbsp;:&nbsp;ast&nbsp;-&gt;&nbsp;bool<br>
scattered&nbsp;function&nbsp;execute<br>
<br>
/*&nbsp;STC&nbsp;instruction&nbsp;*/<br>
<span style="background-color: hsl(120, 85%, 80%)">function&nbsp;clause&nbsp;execute&nbsp;(STC())&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_c_flag(0b1);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;STC&quot;);&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(4);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(1);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span></span><br>
<br>
/*&nbsp;CMC&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute&nbsp;(CMC())&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;c_flag&nbsp;=&nbsp;read_c_flag();<br>
&nbsp;&nbsp;&nbsp;&nbsp;c_flag&nbsp;=&nbsp;xor_vec(c_flag,&nbsp;0b1);<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_c_flag(c_flag);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;CMC&quot;);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(4);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(1);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;INR&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute&nbsp;(INR(r))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;v&nbsp;=&nbsp;read_reg8(r);&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;//if&nbsp;lower&nbsp;nibble&nbsp;is&nbsp;0b1111&nbsp;it&nbsp;means&nbsp;when&nbsp;we&nbsp;add&nbsp;one&nbsp;theres&nbsp;going&nbsp;to&nbsp;be&nbsp;an&nbsp;auxillary&nbsp;carry<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_a_flag(bool_to_bit_converter(v[3..0]&nbsp;==&nbsp;0b1111));&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;v&nbsp;=&nbsp;add_bits(v,&nbsp;0x01);<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(r,&nbsp;v);<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_s_flag(bool_to_bit_converter(v[7..7]&nbsp;==&nbsp;0b1));<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_z_flag(bool_to_bit_converter(v&nbsp;==&nbsp;0b00000000));&nbsp;//if&nbsp;result&nbsp;is&nbsp;0&nbsp;then&nbsp;zero&nbsp;flag&nbsp;should&nbsp;be&nbsp;1<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_p_flag(bool_to_bit_converter(xor_reduce(v)&nbsp;==&nbsp;0b0));//if&nbsp;number&nbsp;of&nbsp;1s&nbsp;is&nbsp;even&nbsp;then&nbsp;parity&nbsp;flag&nbsp;should&nbsp;be&nbsp;1<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(concat_str(&quot;Instruction&nbsp;completed:&nbsp;INR&nbsp;&quot;,&nbsp;reg8_str_map(reg8_num_map(r))));<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;reg8_str_map(reg8_num_map(r))&nbsp;==&nbsp;&quot;M&quot;&nbsp;then&nbsp;<span style="background-color: hsl(0, 85%, 80%)">10</span>&nbsp;else&nbsp;5</span>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;reg8_str_map(reg8_num_map(r))&nbsp;==&nbsp;&quot;M&quot;&nbsp;then&nbsp;5&nbsp;else&nbsp;1</span>);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
//&nbsp;/*&nbsp;DCR&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute&nbsp;(DCR(r))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;v&nbsp;=&nbsp;read_reg8(r);<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_a_flag(bool_to_bit_converter(v[3..0]&nbsp;!=&nbsp;0b0000));<br>
&nbsp;&nbsp;&nbsp;&nbsp;v&nbsp;=&nbsp;sub_bits(v,&nbsp;0b00000001);<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(r,&nbsp;v);<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_s_flag(bool_to_bit_converter(v[7..7]&nbsp;==&nbsp;0b1));&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_z_flag(bool_to_bit_converter(v&nbsp;==&nbsp;0b00000000));&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_p_flag(bool_to_bit_converter(xor_reduce(v)&nbsp;==&nbsp;0b0));<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(concat_str(&quot;Instruction&nbsp;completed:&nbsp;DCR&nbsp;&quot;,&nbsp;reg8_str_map(reg8_num_map(r))));<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;reg8_str_map(reg8_num_map(r))&nbsp;==&nbsp;&quot;M&quot;&nbsp;then&nbsp;<span style="background-color: hsl(0, 85%, 80%)">10</span>&nbsp;else&nbsp;5</span>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;reg8_str_map(reg8_num_map(r))&nbsp;==&nbsp;&quot;M&quot;&nbsp;then&nbsp;5&nbsp;else&nbsp;1</span>);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
//&nbsp;/*&nbsp;CMA&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute&nbsp;(CMA())&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;v&nbsp;=&nbsp;read_reg8(0b111);<br>
&nbsp;&nbsp;&nbsp;&nbsp;v&nbsp;=&nbsp;xor_vec(v,&nbsp;0b11111111);<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(0b111,&nbsp;v);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;CMA&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(4);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(1);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
//&nbsp;/*&nbsp;DAA&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute&nbsp;(DAA())&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;v&nbsp;:&nbsp;word&nbsp;=&nbsp;read_reg8(0b111);<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;correction&nbsp;:&nbsp;word&nbsp;=&nbsp;0x00;<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;cy&nbsp;:&nbsp;bits(1)&nbsp;=&nbsp;read_c_flag();<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;msb&nbsp;:&nbsp;bits(4)&nbsp;=&nbsp;v[7..4];<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;lsb&nbsp;:&nbsp;bits(4)&nbsp;=&nbsp;v[3..0];<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(0, 85%, 75%)">if&nbsp;(<span style="background-color: hsl(0, 85%, 70%)">read_a_flag()&nbsp;==&nbsp;0b1&nbsp;|&nbsp;<span style="background-color: hsl(0, 85%, 65%)">unsigned(lsb)&nbsp;&gt;&nbsp;9</span></span>)&nbsp;then&nbsp;<span style="background-color: hsl(0, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;correction&nbsp;=&nbsp;add_bits(correction,&nbsp;0x06);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span></span><span style="background-color: hsl(0, 85%, 80%)">&#171;Invisible branch not taken here&#187</span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(0, 85%, 75%)">if&nbsp;(<span style="background-color: hsl(0, 85%, 70%)">read_c_flag()&nbsp;==&nbsp;0b1&nbsp;|&nbsp;<span style="background-color: hsl(0, 85%, 65%)">unsigned(msb)&nbsp;&gt;&nbsp;9&nbsp;|&nbsp;(<span style="background-color: hsl(0, 85%, 60%)">unsigned(msb)&nbsp;&gt;=&nbsp;9&nbsp;&&nbsp;<span style="background-color: hsl(0, 85%, 55%)">unsigned(lsb)&nbsp;&gt;&nbsp;9</span></span>)</span></span>)&nbsp;then&nbsp;<span style="background-color: hsl(0, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;correction&nbsp;=&nbsp;add_bits(correction,&nbsp;0x60);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cy&nbsp;=&nbsp;0b1;<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span></span><span style="background-color: hsl(0, 85%, 80%)">&#171;Invisible branch not taken here&#187</span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(0b111,&nbsp;perform_add(v,&nbsp;correction,&nbsp;0b0));<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_c_flag(cy);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;DAA&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(4);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(1);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span>&nbsp;&nbsp;&nbsp;<br>
<br>
//&nbsp;/*&nbsp;NOP&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute&nbsp;(NOP())&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;NOP&quot;);<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(4);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(1);<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
//&nbsp;/*&nbsp;MOV&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute&nbsp;(MOV(dst,&nbsp;src))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(dst,&nbsp;read_reg8(src));<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(concat_str(&quot;Instruction&nbsp;completed:&nbsp;MOV&nbsp;&quot;,&nbsp;concat_str(reg8_str_map(reg8_num_map(dst)),&nbsp;concat_str(&quot;&nbsp;&quot;,&nbsp;reg8_str_map(reg8_num_map(src))))));<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;<span style="background-color: hsl(120, 85%, 70%)">reg8_str_map(reg8_num_map(dst))&nbsp;==&nbsp;&quot;M&quot;&nbsp;|&nbsp;<span style="background-color: hsl(120, 85%, 65%)">reg8_str_map(reg8_num_map(src))&nbsp;==&nbsp;&quot;M&quot;</span></span>&nbsp;then&nbsp;7&nbsp;else&nbsp;5</span>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;<span style="background-color: hsl(120, 85%, 70%)">reg8_str_map(reg8_num_map(dst))&nbsp;==&nbsp;&quot;M&quot;&nbsp;|&nbsp;<span style="background-color: hsl(120, 85%, 65%)">reg8_str_map(reg8_num_map(src))&nbsp;==&nbsp;&quot;M&quot;</span></span>&nbsp;then&nbsp;2&nbsp;else&nbsp;1</span>);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true&nbsp;<br>
}</span><br>
<br>
/*&nbsp;STAX&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute&nbsp;(STAX(reg_pair))&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;addr:&nbsp;addr&nbsp;=&nbsp;read_reg16(0b0&nbsp;@&nbsp;reg_pair);<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;v&nbsp;=&nbsp;read_reg8(0b111);<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_mem(addr,&nbsp;v);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(concat_str(&quot;Instruction&nbsp;completed:&nbsp;STAX&nbsp;&quot;,&nbsp;reg16_str_map(reg16_num_map(sail_zero_extend(reg_pair,&nbsp;2)))));&nbsp;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(7);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(2);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;LDAX&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute&nbsp;(LDAX(reg_pair))&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(0b111,&nbsp;read_mem(read_reg16(0b0&nbsp;@&nbsp;reg_pair)));<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(concat_str(&quot;Instruction&nbsp;completed:&nbsp;LDAX&nbsp;&quot;,&nbsp;reg16_str_map(reg16_num_map(sail_zero_extend(reg_pair,&nbsp;2)))));<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(7);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(2);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;ADD&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute&nbsp;(ADD(r))&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;a:&nbsp;word&nbsp;=&nbsp;read_reg8(0b111);<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;b:&nbsp;word&nbsp;=&nbsp;read_reg8(r);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;perform_add(a,&nbsp;b,&nbsp;0b0);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(0b111,&nbsp;result);<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(concat_str(&quot;Instruction&nbsp;completed:&nbsp;ADD&nbsp;&quot;,&nbsp;reg8_str_map(reg8_num_map(r))));<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(<span style="background-color: hsl(0, 85%, 75%)">if&nbsp;reg8_str_map(reg8_num_map(r))&nbsp;==&nbsp;&quot;M&quot;&nbsp;then&nbsp;7&nbsp;else&nbsp;4</span>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(<span style="background-color: hsl(0, 85%, 75%)">if&nbsp;reg8_str_map(reg8_num_map(r))&nbsp;==&nbsp;&quot;M&quot;&nbsp;then&nbsp;2&nbsp;else&nbsp;1</span>);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;ADC&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute&nbsp;(ADC(r))&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;v:&nbsp;bits(8)&nbsp;=&nbsp;read_reg8(r);<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;acc:&nbsp;bits(8)&nbsp;=&nbsp;read_reg8(0b111);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;result:&nbsp;bits(8)&nbsp;=&nbsp;perform_add(acc,&nbsp;v,&nbsp;read_c_flag());<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(0b111,&nbsp;result);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(concat_str(&quot;Instruction&nbsp;completed:&nbsp;ADC&nbsp;&quot;,&nbsp;reg8_str_map(reg8_num_map(r))));<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(<span style="background-color: hsl(0, 85%, 75%)">if&nbsp;reg8_str_map(reg8_num_map(r))&nbsp;==&nbsp;&quot;M&quot;&nbsp;then&nbsp;7&nbsp;else&nbsp;4</span>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(<span style="background-color: hsl(0, 85%, 75%)">if&nbsp;reg8_str_map(reg8_num_map(r))&nbsp;==&nbsp;&quot;M&quot;&nbsp;then&nbsp;2&nbsp;else&nbsp;1</span>);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
//&nbsp;/*&nbsp;SUB&nbsp;instruction<br>
function&nbsp;clause&nbsp;execute&nbsp;(SUB(r))&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;a_value&nbsp;=&nbsp;read_reg8(0b111);<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;data&nbsp;=&nbsp;read_reg8(r);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;res&nbsp;=&nbsp;perform_sub(a_value,&nbsp;data,&nbsp;0b0);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(0b111,&nbsp;res);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(concat_str(&quot;Instruction&nbsp;completed:&nbsp;SUB&nbsp;&quot;,&nbsp;reg8_str_map(reg8_num_map(r))));<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(<span style="background-color: hsl(0, 85%, 75%)">if&nbsp;reg8_str_map(reg8_num_map(r))&nbsp;==&nbsp;&quot;M&quot;&nbsp;then&nbsp;7&nbsp;else&nbsp;4</span>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(<span style="background-color: hsl(0, 85%, 75%)">if&nbsp;reg8_str_map(reg8_num_map(r))&nbsp;==&nbsp;&quot;M&quot;&nbsp;then&nbsp;2&nbsp;else&nbsp;1</span>);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
//&nbsp;/*&nbsp;SBB&nbsp;instruction&nbsp;<br>
function&nbsp;clause&nbsp;execute&nbsp;(SBB(r))&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;a_value&nbsp;=&nbsp;read_reg8(0b111);&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;data&nbsp;=&nbsp;read_reg8(r);<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;carry&nbsp;=&nbsp;read_c_flag();&nbsp;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;result&nbsp;=&nbsp;perform_sub(a_value,&nbsp;data,&nbsp;carry);<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(0b111,&nbsp;result);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//print_endline(&quot;Instruction&nbsp;completed:&nbsp;SBB&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(7);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(2);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;ANA&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute&nbsp;(ANA(r))&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;v:&nbsp;word&nbsp;=&nbsp;read_reg8(r);<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_a_flag(or_vec(read_reg8(0b111)[3..3],&nbsp;v[3..3]));<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(0b111,&nbsp;and_vec(read_reg8(0b111),&nbsp;v));<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_c_flag(0b0);<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_p_flag(bool_to_bit_converter(xor_reduce(read_reg8(0b111))&nbsp;==&nbsp;0b0));<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_s_flag(bool_to_bit_converter(read_reg8(0b111)[7..7]&nbsp;==&nbsp;0b1));<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_z_flag(bool_to_bit_converter(read_reg8(0b111)&nbsp;==&nbsp;0b00000000));<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(concat_str(&quot;Instruction&nbsp;completed:&nbsp;ANA&nbsp;&quot;,&nbsp;reg8_str_map(reg8_num_map(r))));<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(<span style="background-color: hsl(0, 85%, 75%)">if&nbsp;reg8_str_map(reg8_num_map(r))&nbsp;==&nbsp;&quot;M&quot;&nbsp;then&nbsp;7&nbsp;else&nbsp;4</span>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(<span style="background-color: hsl(0, 85%, 75%)">if&nbsp;reg8_str_map(reg8_num_map(r))&nbsp;==&nbsp;&quot;M&quot;&nbsp;then&nbsp;2&nbsp;else&nbsp;1</span>);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
//&nbsp;/*&nbsp;XRA&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute&nbsp;(XRA(r))&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;v:&nbsp;word&nbsp;=&nbsp;read_reg8(r);<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(0b111,&nbsp;xor_vec(read_reg8(0b111),&nbsp;v));<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_c_flag(0b0);<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_a_flag(0b0);<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_p_flag(bool_to_bit_converter(xor_reduce(read_reg8(0b111))&nbsp;==&nbsp;0b0));<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_s_flag(bool_to_bit_converter(read_reg8(0b111)[7..7]&nbsp;==&nbsp;0b1));<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_z_flag(bool_to_bit_converter(read_reg8(0b111)&nbsp;==&nbsp;0b00000000));<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(concat_str(&quot;Instruction&nbsp;completed:&nbsp;XRA&nbsp;&quot;,&nbsp;reg8_str_map(reg8_num_map(r))));<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(<span style="background-color: hsl(0, 85%, 75%)">if&nbsp;reg8_str_map(reg8_num_map(r))&nbsp;==&nbsp;&quot;M&quot;&nbsp;then&nbsp;7&nbsp;else&nbsp;4</span>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(<span style="background-color: hsl(0, 85%, 75%)">if&nbsp;reg8_str_map(reg8_num_map(r))&nbsp;==&nbsp;&quot;M&quot;&nbsp;then&nbsp;2&nbsp;else&nbsp;1</span>);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
//&nbsp;/*&nbsp;ORA&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute&nbsp;(ORA(r))&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;v:&nbsp;word&nbsp;=&nbsp;read_reg8(r);<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(0b111,&nbsp;or_vec(read_reg8(0b111),&nbsp;v));<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_c_flag(0b0);<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_a_flag(0b0);<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_p_flag(bool_to_bit_converter(xor_reduce(read_reg8(0b111))&nbsp;==&nbsp;0b0));<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_s_flag(bool_to_bit_converter(read_reg8(0b111)[7..7]&nbsp;==&nbsp;0b1));<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_z_flag(bool_to_bit_converter(read_reg8(0b111)&nbsp;==&nbsp;0b00000000));<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(concat_str(&quot;Instruction&nbsp;completed:&nbsp;ORA&nbsp;&quot;,&nbsp;reg8_str_map(reg8_num_map(r))));<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(<span style="background-color: hsl(0, 85%, 75%)">if&nbsp;reg8_str_map(reg8_num_map(r))&nbsp;==&nbsp;&quot;M&quot;&nbsp;then&nbsp;7&nbsp;else&nbsp;4</span>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(<span style="background-color: hsl(0, 85%, 75%)">if&nbsp;reg8_str_map(reg8_num_map(r))&nbsp;==&nbsp;&quot;M&quot;&nbsp;then&nbsp;2&nbsp;else&nbsp;1</span>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
//&nbsp;/*&nbsp;CMP&nbsp;instruction&nbsp;*/&nbsp;NEED&nbsp;TO&nbsp;CHECK&nbsp;LOGIC&nbsp;OF&nbsp;THIS&nbsp;AND&nbsp;UPDATE<br>
function&nbsp;clause&nbsp;execute&nbsp;(CMP(r))&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;a_value&nbsp;=&nbsp;read_reg8(0b111);<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;data_value&nbsp;=&nbsp;read_reg8(r);<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;data&nbsp;=&nbsp;read_reg8(r);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;res&nbsp;=&nbsp;perform_sub(a_value,&nbsp;data_value,&nbsp;0b0);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;CMP&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(0, 85%, 75%)">if&nbsp;reg8_str_map(reg8_num_map(r))&nbsp;==&nbsp;&quot;M&quot;&nbsp;then&nbsp;<span style="background-color: hsl(0, 85%, 70%)">increment_clock_cycle_count(7)</span>&nbsp;else&nbsp;<span style="background-color: hsl(0, 85%, 70%)">increment_clock_cycle_count(4)</span></span>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(0, 85%, 75%)">if&nbsp;reg8_str_map(reg8_num_map(r))&nbsp;==&nbsp;&quot;M&quot;&nbsp;then&nbsp;<span style="background-color: hsl(0, 85%, 70%)">increment_machine_cycle_count(2)</span>&nbsp;else&nbsp;<span style="background-color: hsl(0, 85%, 70%)">increment_machine_cycle_count(1)</span></span>;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
//&nbsp;/*&nbsp;RLC&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute&nbsp;(RLC())&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;v&nbsp;=&nbsp;read_reg8(0b111);<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;msb&nbsp;=&nbsp;v[7..7];<br>
&nbsp;&nbsp;&nbsp;&nbsp;v&nbsp;=&nbsp;shiftl(v,&nbsp;1);<br>
&nbsp;&nbsp;&nbsp;&nbsp;v[0..0]&nbsp;=&nbsp;msb;<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(0b111,&nbsp;v);<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_c_flag(msb);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;RLC&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(4);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(1);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
//&nbsp;/*&nbsp;RRC&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(RRC())&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;v&nbsp;=&nbsp;read_reg8(0b111);<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;lsb&nbsp;=&nbsp;v[0..0];<br>
&nbsp;&nbsp;&nbsp;&nbsp;v&nbsp;=&nbsp;shiftr(v,&nbsp;1);<br>
&nbsp;&nbsp;&nbsp;&nbsp;v[7..7]&nbsp;=&nbsp;lsb;<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(0b111,&nbsp;v);<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_c_flag(lsb);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;RRC&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(4);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(1);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
//&nbsp;/*&nbsp;RAL&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(RAL())&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;v&nbsp;=&nbsp;read_reg8(0b111);<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;msb&nbsp;=&nbsp;v[7..7];<br>
&nbsp;&nbsp;&nbsp;&nbsp;v&nbsp;=&nbsp;shiftl(v,&nbsp;1);<br>
&nbsp;&nbsp;&nbsp;&nbsp;v[0..0]&nbsp;=&nbsp;read_c_flag();<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(0b111,&nbsp;v);<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_c_flag(msb);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;RAL&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(4);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(1);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;RAR&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(RAR())&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;v&nbsp;=&nbsp;read_reg8(0b111);<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;lsb&nbsp;=&nbsp;v[0..0];<br>
&nbsp;&nbsp;&nbsp;&nbsp;v&nbsp;=&nbsp;shiftr(v,&nbsp;1);<br>
&nbsp;&nbsp;&nbsp;&nbsp;v[7..7]&nbsp;=&nbsp;read_c_flag();<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(0b111,&nbsp;v);<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_c_flag(lsb);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;RAR&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(4);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(1);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;PUSH&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(PUSH(r))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;data&nbsp;=&nbsp;read_reg16(r);<br>
&nbsp;&nbsp;&nbsp;&nbsp;push_stack(data);<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(concat_str(&quot;Instruction&nbsp;completed:&nbsp;PUSH&nbsp;&quot;,&nbsp;reg16_str_map(reg16_num_map(r))));<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(11);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(4);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;POP&nbsp;instruction&nbsp;*/&nbsp;<br>
function&nbsp;clause&nbsp;execute(POP(r))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;stack_data&nbsp;=&nbsp;pop_stack();<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;reg16_str_map(reg16_num_map(r))&nbsp;==&nbsp;&quot;AF&quot;&nbsp;then&nbsp;<span style="background-color: hsl(120, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stack_data[5..5]&nbsp;=&nbsp;0b0;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stack_data[3..3]&nbsp;=&nbsp;0b0;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stack_data[1..1]&nbsp;=&nbsp;0b1;<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span></span>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg16(r,&nbsp;stack_data);<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(concat_str(&quot;Instruction&nbsp;completed:&nbsp;POP&nbsp;&quot;,&nbsp;reg16_str_map(reg16_num_map(r))));<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(10);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;DAD&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(DAD(r))&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;v&nbsp;=&nbsp;0b0&nbsp;@&nbsp;read_reg16_sp(r);<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;hl&nbsp;=&nbsp;0b0&nbsp;@&nbsp;read_reg16_sp(0b10);<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;res&nbsp;=&nbsp;add_bits(hl,&nbsp;v);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg16_sp(0b10,&nbsp;res[15..0]);<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_c_flag(res[16..16]);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(concat_str(&quot;Instruction&nbsp;completed:&nbsp;DAD&nbsp;&quot;,&nbsp;reg16_str_map(reg16_num_map(r))));<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(10);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;INX&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(INX(r))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;v&nbsp;=&nbsp;read_reg16_sp(r);<br>
&nbsp;&nbsp;&nbsp;&nbsp;v&nbsp;=&nbsp;add_bits(v,&nbsp;0x0001);<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg16_sp(r,&nbsp;v);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(concat_str(&quot;Instruction&nbsp;completed:&nbsp;INX&nbsp;&quot;,&nbsp;reg16_str_map(reg16_num_map(r))));<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(5);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(1);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;DCX&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(DCX(r))&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;v&nbsp;=&nbsp;read_reg16_sp(r);<br>
&nbsp;&nbsp;&nbsp;&nbsp;v&nbsp;=&nbsp;sub_bits(v,&nbsp;0x0001);<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg16_sp(r,&nbsp;v);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(concat_str(&quot;Instruction&nbsp;completed:&nbsp;DCX&nbsp;&quot;,&nbsp;reg16_str_map(reg16_num_map(r))));<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(5);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(1);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;XCHG&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(XCHG())&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;de&nbsp;=&nbsp;read_reg16_sp(0b01);<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;hl&nbsp;=&nbsp;read_reg16_sp(0b10);<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg16_sp(0b01,&nbsp;hl);<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg16_sp(0b10,&nbsp;de);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;XCHG&quot;);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(4);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(1);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;XTHL&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(XTHL())&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;sp&nbsp;=&nbsp;read_reg16_sp(0b11);<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;hl&nbsp;=&nbsp;read_reg16_sp(0b10);<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;h&nbsp;=&nbsp;read_mem(sp);<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;l&nbsp;=&nbsp;read_mem(sp&nbsp;+&nbsp;0x0001);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_mem(sp,&nbsp;hl[7..0]);<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_mem(sp&nbsp;+&nbsp;0x0001,&nbsp;hl[15..8]);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg16_sp(0b10,&nbsp;l&nbsp;@&nbsp;h);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;XTHL&quot;);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(18);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(5);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;SPHL&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(SPHL())&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;hl&nbsp;=&nbsp;read_reg16_sp(0b10);<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg16_sp(0b11,&nbsp;hl);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;SPHL&quot;);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(5);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(1);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;LXI&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(LXI(r,&nbsp;low_data,&nbsp;high_data))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg16_sp(r,&nbsp;high_data&nbsp;@&nbsp;low_data);<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(concat_str(&quot;Instruction&nbsp;completed:&nbsp;LXI&nbsp;&quot;,&nbsp;reg16_str_map(reg16_num_map(r))));<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(10);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;MVI&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(MVI(r,&nbsp;data))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(r,&nbsp;data);<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(concat_str(&quot;Instruction&nbsp;completed:&nbsp;MVI&nbsp;&quot;,&nbsp;reg8_str_map(reg8_num_map(r))));<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;reg8_str_map(reg8_num_map(r))&nbsp;==&nbsp;&quot;M&quot;&nbsp;then&nbsp;<span style="background-color: hsl(0, 85%, 80%)">increment_clock_cycle_count(10)</span>&nbsp;else&nbsp;<span style="background-color: hsl(120, 85%, 70%)">increment_clock_cycle_count(7)</span></span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;ADI&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(ADI(data))&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;v&nbsp;=&nbsp;read_reg8(0b111);<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;result&nbsp;=&nbsp;perform_add(v,&nbsp;data,&nbsp;0b0);<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(0b111,&nbsp;result);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;ADI&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(7);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(2);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;ACI&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(ACI(data))&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;acc:&nbsp;bits(8)&nbsp;=&nbsp;read_reg8(0b111);<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;result:&nbsp;bits(8)&nbsp;=&nbsp;perform_add(acc,&nbsp;data,&nbsp;read_c_flag());<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(0b111,&nbsp;result);<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;ACI&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(7);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(2);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;SUI&nbsp;instruction:&nbsp;TODO&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(SUI(data))&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;a_value&nbsp;=&nbsp;read_reg8(0b111);&nbsp;//&nbsp;Read&nbsp;accumulator&nbsp;(A)<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;res&nbsp;=&nbsp;perform_sub(a_value,&nbsp;data,&nbsp;0b0);&nbsp;//&nbsp;Perform&nbsp;subtraction<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(0b111,&nbsp;res);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(7);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(2);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;SUI&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;SBI&nbsp;instruction:&nbsp;TODO&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(SBI(data))&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;a_value&nbsp;=&nbsp;read_reg8(0b111);&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;carry&nbsp;=&nbsp;read_c_flag();&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;result&nbsp;=&nbsp;perform_sub(a_value,&nbsp;data,&nbsp;carry);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(0b111,&nbsp;result);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;SBI&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(7);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(2);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
<br>
/*&nbsp;ANI&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(ANI(data))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;v:&nbsp;word&nbsp;=&nbsp;data;<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_a_flag(or_vec(read_reg8(0b111)[3..3],&nbsp;v[3..3]));<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(0b111,&nbsp;and_vec(read_reg8(0b111),&nbsp;v));<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_c_flag(0b0);<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_p_flag(bool_to_bit_converter(xor_reduce(read_reg8(0b111))&nbsp;==&nbsp;0b0));<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_s_flag(bool_to_bit_converter(read_reg8(0b111)[7..7]&nbsp;==&nbsp;0b1));<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_z_flag(bool_to_bit_converter(read_reg8(0b111)&nbsp;==&nbsp;0b00000000));<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;ANI&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(7);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(2);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;XRI&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(XRI(data))&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;v:&nbsp;word&nbsp;=&nbsp;data;<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(0b111,&nbsp;xor_vec(read_reg8(0b111),&nbsp;v));<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_c_flag(0b0);<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_a_flag(0b0);<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_p_flag(bool_to_bit_converter(xor_reduce(read_reg8(0b111))&nbsp;==&nbsp;0b0));<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_s_flag(bool_to_bit_converter(read_reg8(0b111)[7..7]&nbsp;==&nbsp;0b1));<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_z_flag(bool_to_bit_converter(read_reg8(0b111)&nbsp;==&nbsp;0b00000000));<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;XRI&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(7);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(2);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;ORI&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(ORI(data))&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;v:&nbsp;word&nbsp;=&nbsp;data;<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(0b111,&nbsp;or_vec(read_reg8(0b111),&nbsp;v));<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_c_flag(0b0);<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_a_flag(0b0);<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_p_flag(bool_to_bit_converter(xor_reduce(read_reg8(0b111))&nbsp;==&nbsp;0b0));<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_s_flag(bool_to_bit_converter(read_reg8(0b111)[7..7]&nbsp;==&nbsp;0b1));<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_z_flag(bool_to_bit_converter(read_reg8(0b111)&nbsp;==&nbsp;0b00000000));<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;ORI&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(7);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(2);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;CPI&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(CPI(data))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;result&nbsp;=&nbsp;perform_sub(read_reg8(0b111),&nbsp;data,&nbsp;0b0);<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;CPI&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(7);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(2);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;STA&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(STA(low_data,&nbsp;high_data))&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;addr:&nbsp;addr&nbsp;=&nbsp;high_data&nbsp;@&nbsp;low_data;<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_mem(addr,&nbsp;read_reg8(0b111));<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;STA&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(13);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(4);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;LDA&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(LDA(low_data,&nbsp;high_data))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;addr:&nbsp;addr&nbsp;=&nbsp;high_data&nbsp;@&nbsp;low_data;<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(0b111,&nbsp;read_mem(addr));<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;LDA&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(13);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(4);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;SHLD&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(SHLD(low_data,&nbsp;high_data))&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;addr:&nbsp;addr&nbsp;=&nbsp;high_data&nbsp;@&nbsp;low_data;<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_mem(addr,&nbsp;read_reg8(0b101));<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_mem(add_bits(addr,&nbsp;0x0001),&nbsp;read_reg8(0b100));<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;SHLD&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(16);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(5);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;LHLD&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(LHLD(low_data,&nbsp;high_data))&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;addr:&nbsp;addr&nbsp;=&nbsp;high_data&nbsp;@&nbsp;low_data;<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(0b101,&nbsp;read_mem(addr));<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_reg8(0b100,&nbsp;read_mem(add_bits(addr,&nbsp;0x0001)));<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;LHLD&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(16);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(5);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;PCHL&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(PCHL())&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;read_reg16_sp(0b10);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;PCHL&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(5);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(1);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;JMP&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(JMP(low_data,&nbsp;high_data))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;high_data&nbsp;@&nbsp;low_data;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;JMP&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(10);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;JC&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(JC(low_data,&nbsp;high_data))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;read_c_flag()&nbsp;==&nbsp;0b1&nbsp;then&nbsp;<span style="background-color: hsl(120, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;high_data&nbsp;@&nbsp;low_data;<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span></span><span style="background-color: hsl(0, 85%, 80%)">&#171;Invisible branch not taken here&#187</span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;JC&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(10);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;JNC&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(JNC(low_data,&nbsp;high_data))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;read_c_flag()&nbsp;==&nbsp;0b0&nbsp;then&nbsp;<span style="background-color: hsl(120, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;high_data&nbsp;@&nbsp;low_data;<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span></span><span style="background-color: hsl(0, 85%, 80%)">&#171;Invisible branch not taken here&#187</span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;JNC&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(10);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;JZ&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(JZ(low_data,&nbsp;high_data))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;read_z_flag()&nbsp;==&nbsp;0b1&nbsp;then&nbsp;<span style="background-color: hsl(120, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;high_data&nbsp;@&nbsp;low_data;<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span></span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;JZ&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(10);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;JNZ&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(JNZ(low_data,&nbsp;high_data))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;read_z_flag()&nbsp;==&nbsp;0b0&nbsp;then&nbsp;<span style="background-color: hsl(120, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;high_data&nbsp;@&nbsp;low_data;<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span></span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;JNZ&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(10);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;JM&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(JM(low_data,&nbsp;high_data))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;read_s_flag()&nbsp;==&nbsp;0b1&nbsp;then&nbsp;<span style="background-color: hsl(120, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;high_data&nbsp;@&nbsp;low_data;<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span></span><span style="background-color: hsl(0, 85%, 80%)">&#171;Invisible branch not taken here&#187</span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;JM&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(10);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;JP&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(JP(low_data,&nbsp;high_data))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;read_s_flag()&nbsp;==&nbsp;0b0&nbsp;then&nbsp;<span style="background-color: hsl(120, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;high_data&nbsp;@&nbsp;low_data;<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span></span><span style="background-color: hsl(0, 85%, 80%)">&#171;Invisible branch not taken here&#187</span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;JP&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(10);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;JPE&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(JPE(low_data,&nbsp;high_data))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;read_p_flag()&nbsp;==&nbsp;0b1&nbsp;then&nbsp;<span style="background-color: hsl(120, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;high_data&nbsp;@&nbsp;low_data;<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span></span><span style="background-color: hsl(0, 85%, 80%)">&#171;Invisible branch not taken here&#187</span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;JPE&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(10);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;JPO&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(JPO(low_data,&nbsp;high_data))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;read_p_flag()&nbsp;==&nbsp;0b0&nbsp;then&nbsp;<span style="background-color: hsl(120, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;high_data&nbsp;@&nbsp;low_data;<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span></span><span style="background-color: hsl(0, 85%, 80%)">&#171;Invisible branch not taken here&#187</span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;JPO&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(10);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;CALL&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(CALL(low_data,&nbsp;high_data))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;push_stack(PC_reg[full]);<br>
&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;high_data&nbsp;@&nbsp;low_data;<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;CALL&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(17);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(5);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;CC&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(CC(low_data,&nbsp;high_data))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;read_c_flag()&nbsp;==&nbsp;0b1&nbsp;then&nbsp;<span style="background-color: hsl(120, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push_stack(PC_reg[full]);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;high_data&nbsp;@&nbsp;low_data;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(17);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(5);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span>&nbsp;else&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(11);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span></span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;CC&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;CNC&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(CNC(low_data,&nbsp;high_data))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;read_c_flag()&nbsp;==&nbsp;0b0&nbsp;then&nbsp;<span style="background-color: hsl(120, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push_stack(PC_reg[full]);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;high_data&nbsp;@&nbsp;low_data;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(17);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(5);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span>&nbsp;else&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(11);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span></span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;CNC&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;CZ&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(CZ(low_data,&nbsp;high_data))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;read_z_flag()&nbsp;==&nbsp;0b1&nbsp;then&nbsp;<span style="background-color: hsl(120, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push_stack(PC_reg[full]);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;high_data&nbsp;@&nbsp;low_data;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(17);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(5);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span>&nbsp;else&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(11);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span></span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;CZ&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;CNZ&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(CNZ(low_data,&nbsp;high_data))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;read_z_flag()&nbsp;==&nbsp;0b0&nbsp;then&nbsp;<span style="background-color: hsl(120, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push_stack(PC_reg[full]);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;high_data&nbsp;@&nbsp;low_data;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(17);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(5);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span>&nbsp;else&nbsp;<span style="background-color: hsl(120, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(11);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span></span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;CNZ&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;CM&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(CM(low_data,&nbsp;high_data))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;read_s_flag()&nbsp;==&nbsp;0b1&nbsp;then&nbsp;<span style="background-color: hsl(120, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push_stack(PC_reg[full]);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;high_data&nbsp;@&nbsp;low_data;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(17);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(5);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span>&nbsp;else&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(11);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span></span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;CM&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;CP&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(CP(low_data,&nbsp;high_data))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;read_s_flag()&nbsp;==&nbsp;0b0&nbsp;then&nbsp;<span style="background-color: hsl(120, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push_stack(PC_reg[full]);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;high_data&nbsp;@&nbsp;low_data;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(17);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(5);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span>&nbsp;else&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(11);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span></span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;CP&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;CPE&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(CPE(low_data,&nbsp;high_data))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;read_p_flag()&nbsp;==&nbsp;0b1&nbsp;then&nbsp;<span style="background-color: hsl(120, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push_stack(PC_reg[full]);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;high_data&nbsp;@&nbsp;low_data;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(17);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(5);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span>&nbsp;else&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(11);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span></span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;CPE&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;CPO&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(CPO(low_data,&nbsp;high_data))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;read_p_flag()&nbsp;==&nbsp;0b0&nbsp;then&nbsp;<span style="background-color: hsl(120, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push_stack(PC_reg[full]);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;high_data&nbsp;@&nbsp;low_data;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(17);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(5);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span>&nbsp;else&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(11);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span></span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;CPO&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;RET&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(RET())&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;pop_stack();<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;RET&quot;);<br>
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(10);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;RC&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(RC())&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;read_c_flag()&nbsp;==&nbsp;0b1&nbsp;then&nbsp;<span style="background-color: hsl(120, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;pop_stack();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(11);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span>&nbsp;else&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(5);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(1);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span></span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;RC&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;RNC&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(RNC())&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;read_c_flag()&nbsp;==&nbsp;0b0&nbsp;then&nbsp;<span style="background-color: hsl(120, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;pop_stack();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(11);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span>&nbsp;else&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(5);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(1);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span></span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;RNC&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;RZ&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(RZ())&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;read_z_flag()&nbsp;==&nbsp;0b1&nbsp;then&nbsp;<span style="background-color: hsl(120, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;pop_stack();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(11);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span>&nbsp;else&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(5);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(1);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span></span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;RZ&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;RNZ&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(RNZ())&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;read_z_flag()&nbsp;==&nbsp;0b0&nbsp;then&nbsp;<span style="background-color: hsl(120, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;pop_stack();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(11);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span>&nbsp;else&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(5);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(1);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span></span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;RNZ&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;RM&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(RM())&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;read_s_flag()&nbsp;==&nbsp;0b1&nbsp;then&nbsp;<span style="background-color: hsl(120, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;pop_stack();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(11);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span>&nbsp;else&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(5);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(1);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span></span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;RM&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;RP&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(RP())&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;read_s_flag()&nbsp;==&nbsp;0b0&nbsp;then&nbsp;<span style="background-color: hsl(120, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;pop_stack();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(11);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span>&nbsp;else&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(5);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(1);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span></span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;RP&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;RPE&nbsp;instruction&nbsp;*/&nbsp;&nbsp;&nbsp;<br>
function&nbsp;clause&nbsp;execute(RPE())&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;read_p_flag()&nbsp;==&nbsp;0b1&nbsp;then&nbsp;<span style="background-color: hsl(120, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;pop_stack();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(11);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span>&nbsp;else&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(5);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(1);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span></span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;RPE&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;RPO&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(RPO())&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: hsl(120, 85%, 75%)">if&nbsp;read_p_flag()&nbsp;==&nbsp;0b0&nbsp;then&nbsp;<span style="background-color: hsl(120, 85%, 70%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;pop_stack();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(11);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span>&nbsp;else&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(5);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(1);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}</span></span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;RPO&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;RST&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(RST(exp))&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;push_stack(PC_reg[full]);<br>
&nbsp;&nbsp;&nbsp;&nbsp;PC_reg[full]&nbsp;=&nbsp;0b0000000000&nbsp;@&nbsp;exp&nbsp;@&nbsp;0b000;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;RST&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(11);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;EI&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(EI())&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;set_interrupt_enable(0b1);<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;EI&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(4);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(1);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;DI&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(DI())&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;set_interrupt_enable(0b0);<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;DI&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(4);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(1);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;IN&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(IN(port))&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;read_devacc(port);<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;IN&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(10);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;OUT&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute(OUT(port))&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;write_devacc(port);<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;OUT&quot;);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(10);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(3);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
}</span><br>
<br>
/*&nbsp;HLT&nbsp;instruction&nbsp;*/<br>
function&nbsp;clause&nbsp;execute&nbsp;(HLT())&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;Instruction&nbsp;completed:&nbsp;HLT&nbsp;&quot;);<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_clock_cycle_count(7);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_machine_cycle_count(1);<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;false<br>
}</span><br>
<br>
function&nbsp;clause&nbsp;execute(NOTFOUND8(this))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;not&nbsp;found,&nbsp;try&nbsp;16&quot;);<br>
&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;next_byte:&nbsp;bitvector(8)&nbsp;=&nbsp;read_mem(PC_reg[full]);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_pc();<br>
&nbsp;&nbsp;&nbsp;&nbsp;execute(decode16(this&nbsp;@&nbsp;next_byte));<br>
}</span><br>
<br>
function&nbsp;clause&nbsp;execute(NOTFOUND16(this))&nbsp;=&nbsp;<span style="background-color: hsl(120, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_endline(&quot;not&nbsp;found,&nbsp;try&nbsp;24&quot;);<br>
&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;next_byte:&nbsp;bitvector(8)&nbsp;=&nbsp;read_mem(PC_reg[full]);<br>
&nbsp;&nbsp;&nbsp;&nbsp;increment_pc();<br>
&nbsp;&nbsp;&nbsp;&nbsp;execute(decode24(this&nbsp;@&nbsp;next_byte))<br>
}</span><br>
<br>
function&nbsp;clause&nbsp;execute(NOTFOUND24(this))&nbsp;=&nbsp;<span style="background-color: hsl(0, 85%, 80%)">{<br>
&nbsp;&nbsp;&nbsp;&nbsp;print_endline(&quot;invalid&nbsp;instruction&quot;);<br>
&nbsp;&nbsp;&nbsp;&nbsp;print_bits(&quot;this:&nbsp;&quot;,&nbsp;this);<br>
&nbsp;&nbsp;&nbsp;&nbsp;false<br>
}</span><br>
<br>
</code>
</body>
</html>